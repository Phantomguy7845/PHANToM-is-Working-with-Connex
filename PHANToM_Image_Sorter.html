<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PHANToM Image Sorter — TensorFlow Aurora Edition</title>
<style>
:root{
  --bg:#0b1220; --panel:#0f1830; --edge:#243353; --txt:#e5e7eb;
  --muted:#9cb1d9; --pri:#6b8bff; --a1:#8bf5ff; --ok:#22c55e;
  --warn:#f59e0b; --err:#ef4444;
}
*{box-sizing:border-box;font-family:'Prompt',system-ui,sans-serif}
body{
  margin:0;min-height:100vh;background:radial-gradient(1000px 700px at 15% 15%,#101b3a,#070c18 60%);
  color:var(--txt);display:flex;flex-direction:column;
}
header{
  display:flex;justify-content:space-between;align-items:center;
  padding:14px 18px;border-bottom:1px solid var(--edge);
  background:rgba(255,255,255,.03);
}
h1{margin:0;font-size:1.3rem;font-weight:700}
main{display:grid;grid-template-columns:340px 1fr;gap:12px;padding:12px}
@media(max-width:900px){main{grid-template-columns:1fr}}
.card{background:rgba(255,255,255,.04);border:1px solid var(--edge);
  border-radius:16px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
button{
  border:none;border-radius:10px;padding:8px 14px;margin:4px;cursor:pointer;
  font-weight:600;color:#fff;background:var(--pri);transition:.3s;
}
button:hover{filter:brightness(1.15)}
button.warn{background:var(--warn);color:#000}
button.ok{background:var(--ok)}
button.secondary{background:#132044}
button.ghost{background:transparent;border:1px solid var(--edge);color:var(--txt)}
.note{color:var(--muted);font-size:.9rem;margin-top:6px}
.droper{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:10px;min-height:140px;border:2px dashed var(--edge);border-radius:14px;
  background:#0c1633;cursor:pointer;
}
.droper.drag{border-color:var(--a1);box-shadow:0 0 10px var(--a1);}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:10px;margin-top:10px}
.item{position:relative;border:1px solid var(--edge);border-radius:14px;overflow:hidden;background:#0e1a3a}
.thumb{aspect-ratio:1/1;width:100%;object-fit:cover}
.cover{position:absolute;right:8px;top:8px;background:rgba(0,0,0,.4);
  border:1px solid var(--edge);padding:4px 6px;border-radius:10px;font-size:.75rem}
.cover.active{background:linear-gradient(90deg,var(--pri),var(--a1));color:#001018}
.toast{position:fixed;right:14px;bottom:14px;background:#0d1b36;border:1px solid var(--edge);
  padding:10px 12px;border-radius:12px;opacity:0;transform:translateY(10px);
  pointer-events:none;transition:.25s}
.toast.show{opacity:1;transform:translateY(0)}
</style>
</head>
<body>
<header>
  <h1>PHANToM Image Sorter</h1>
  <div>by PHANToM</div>
</header>

<main>
  <section class="card">
    <label class="note">โหมดการเรียง:</label>
    <div style="display:flex;gap:10px">
      <label><input type="radio" name="mode" value="condo" checked> คอนโด/ห้องเช่า</label>
      <label><input type="radio" name="mode" value="house"> บ้าน</label>
    </div>

    <hr style="border:none;border-top:1px solid var(--edge);margin:10px 0">
    <label class="note">อัปโหลดรูปภาพ</label>
    <div id="drop" class="droper">
      <div>ลากรูปมาวางที่นี่</div><div>หรือ</div>
      <label for="picker" class="ghost" style="padding:8px 14px;cursor:pointer">เลือกไฟล์...</label>
      <input id="picker" type="file" accept="image/*" multiple style="display:none">
    </div>

    <div class="note" style="margin-top:6px">
      <b>คำสั่งเรียง:</b> Living → Dining/Kitchen → Corridor → Bedroom → Bathroom → Balcony/View → Facilities
    </div>

    <div style="margin-top:8px">
      <button id="autoHeu" class="ghost">Heuristic Sort</button>
      <button id="autoAI" class="secondary">AI Sort (Offline)</button>
      <button id="autoCustom" class="ok">AI Sort (Custom)</button>
      <button id="clear" class="warn">ล้างทั้งหมด</button>
      <button id="openTrainer" class="ghost" style="margin-top:8px;">เทรนโมเดลใหม่ (เปิด Room Trainer)</button>
    </div>

    <div class="note" style="margin-top:8px">
      <span id="aiStatus" style="color:#ef4444">Offline AI: ยังไม่โหลด</span><br>
      <span id="customStatus" style="color:#ef4444">Custom Model: ยังไม่โหลด</span>
    </div>

    <hr style="border:none;border-top:1px solid var(--edge);margin:10px 0">
    <button id="exportZip" class="ok">Export JPG + ZIP</button>
  </section>

  <section class="card">
    <div class="note" style="padding-bottom:6px">ลากภาพสลับตำแหน่งได้ หรือกดปุ่ม Cover เพื่อเลือกภาพปก</div>
    <div id="grid" class="grid"></div>
  </section>
</main>

<div id="toast" class="toast">พร้อมทำงาน</div>

<!-- JS Libraries -->
<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>
<script src="js/phantom-image-sorter.js"></script>

<!-- ปุ่มเปิด Room Trainer -->
<script>
document.getElementById("openTrainer").addEventListener("click",()=>{
  window.open("PHANToM_Room_Trainer.html","_blank");
});
</script>
</body>
</html>
